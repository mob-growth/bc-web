---
import DashboardLayout from '../../components/portal/DashboardLayout.astro';
import SidebarNav from '../../components/portal/SidebarNav.astro';

// Mock data for assignments
const activeAssignments = [
  {
    id: 1,
    title: 'Business Email Writing Task',
    course: 'Business English B2',
    dueDate: '2025-10-05',
    dueTime: '23:59',
    status: 'pending',
    progress: 60,
    description: 'Write a formal business email responding to a client inquiry',
    attachments: ['email_template.pdf', 'guidelines.docx']
  },
  {
    id: 2,
    title: 'IELTS Writing Task 2 Practice',
    course: 'IELTS Preparation',
    dueDate: '2025-10-03',
    dueTime: '18:00',
    status: 'overdue',
    progress: 30,
    description: 'Complete an argumentative essay on environmental topics',
    attachments: ['topic_list.pdf']
  },
  {
    id: 3,
    title: 'Speaking Video Recording',
    course: 'Speaking Focus Group',
    dueDate: '2025-10-08',
    dueTime: '20:00',
    status: 'pending',
    progress: 0,
    description: 'Record a 3-minute presentation on your favorite hobby',
    attachments: ['rubric.pdf', 'sample_video.mp4']
  },
  {
    id: 4,
    title: 'Grammar Exercise Set 5',
    course: 'Business English B2',
    dueDate: '2025-10-04',
    dueTime: '17:00',
    status: 'pending',
    progress: 85,
    description: 'Complete exercises on conditional sentences and modal verbs',
    attachments: ['exercise_sheet.pdf']
  }
];

const pastAssignments = [
  {
    id: 5,
    title: 'Vocabulary Quiz - Unit 4',
    course: 'Business English B2',
    submittedDate: '2025-09-25',
    status: 'completed',
    grade: 92,
    maxGrade: 100,
    feedback: 'Excellent work! Your understanding of business terminology is impressive. Keep focusing on pronunciation.',
    teacher: 'Sarah Williams'
  },
  {
    id: 6,
    title: 'IELTS Reading Practice Test',
    course: 'IELTS Preparation',
    submittedDate: '2025-09-20',
    status: 'completed',
    grade: 7.5,
    maxGrade: 9,
    feedback: 'Good progress. Work on time management and skimming techniques for better results.',
    teacher: 'James Morrison'
  },
  {
    id: 7,
    title: 'Group Discussion Participation',
    course: 'Speaking Focus Group',
    submittedDate: '2025-09-18',
    status: 'completed',
    grade: 88,
    maxGrade: 100,
    feedback: 'Great participation and fluency. Try to incorporate more advanced vocabulary in future discussions.',
    teacher: 'Emma Thompson'
  },
  {
    id: 8,
    title: 'Essay Writing - Technology Impact',
    course: 'IELTS Preparation',
    submittedDate: '2025-09-15',
    status: 'completed',
    grade: 6.5,
    maxGrade: 9,
    feedback: 'Well-structured essay. Focus on developing more complex sentence structures and linking words.',
    teacher: 'James Morrison'
  },
  {
    id: 9,
    title: 'Business Presentation Skills',
    course: 'Business English B2',
    submittedDate: '2025-09-10',
    status: 'completed',
    grade: 95,
    maxGrade: 100,
    feedback: 'Outstanding presentation! Excellent use of professional language and engaging delivery.',
    teacher: 'Sarah Williams'
  }
];

// Calculate statistics
const totalAssignments = activeAssignments.length + pastAssignments.length;
const completedAssignments = pastAssignments.length;
const pendingAssignments = activeAssignments.filter(a => a.status === 'pending').length;
const overdueAssignments = activeAssignments.filter(a => a.status === 'overdue').length;
const averageGrade = pastAssignments.reduce((sum, a) => {
  const percentage = (a.grade / a.maxGrade) * 100;
  return sum + percentage;
}, 0) / pastAssignments.length;

// Helper function to format date
function formatDate(dateString: string) {
  const date = new Date(dateString);
  const today = new Date();
  const tomorrow = new Date(today);
  tomorrow.setDate(tomorrow.getDate() + 1);

  if (date.toDateString() === today.toDateString()) return 'Today';
  if (date.toDateString() === tomorrow.toDateString()) return 'Tomorrow';

  return date.toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' });
}

// Helper function to get days remaining
function getDaysRemaining(dateString: string, timeString: string) {
  const dueDate = new Date(`${dateString}T${timeString}`);
  const now = new Date();
  const diff = dueDate.getTime() - now.getTime();
  const days = Math.ceil(diff / (1000 * 60 * 60 * 24));

  if (days < 0) return `${Math.abs(days)} days overdue`;
  if (days === 0) return 'Due today';
  if (days === 1) return 'Due tomorrow';
  return `${days} days left`;
}
---

<DashboardLayout title="Assignments" currentPage="assignments">
  <SidebarNav slot="sidebar" currentPage="assignments" />

  <div slot="header">
    <div>
      <h1 class="header-title">Assignments</h1>
      <p class="header-subtitle">Track and submit your course assignments</p>
    </div>
    <div class="header-actions">
      <button class="notification-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
        </svg>
        <span class="notification-badge">{overdueAssignments}</span>
      </button>
    </div>
  </div>

  <!-- Assignment Statistics -->
  <div class="stats-grid">
    <div class="stat-card">
      <h3 class="stat-value">{completedAssignments}</h3>
      <p class="stat-label">Completed</p>
    </div>

    <div class="stat-card">
      <h3 class="stat-value">{pendingAssignments}</h3>
      <p class="stat-label">Pending</p>
    </div>

    <div class="stat-card">
      <h3 class="stat-value">{overdueAssignments}</h3>
      <p class="stat-label">Overdue</p>
    </div>

    <div class="stat-card">
      <h3 class="stat-value">{averageGrade.toFixed(1)}%</h3>
      <p class="stat-label">Average</p>
    </div>
  </div>

  <!-- Filter Buttons -->
  <div class="filter-section">
    <button class="filter-btn active" data-filter="all">
      All Assignments
      <span class="filter-count">{totalAssignments}</span>
    </button>
    <button class="filter-btn" data-filter="active">
      Active
      <span class="filter-count">{activeAssignments.length}</span>
    </button>
    <button class="filter-btn" data-filter="completed">
      Completed
      <span class="filter-count">{completedAssignments}</span>
    </button>
    <button class="filter-btn" data-filter="overdue">
      Overdue
      <span class="filter-count">{overdueAssignments}</span>
    </button>
  </div>

  <!-- Active Assignments Section -->
  <section class="section" id="active-section">
    <div class="section-header">
      <h2 class="section-title">Active Assignments</h2>
    </div>

    <!-- Timeline Container -->
    <div class="timeline-container">
      {activeAssignments.map((assignment, index) => (
        <div class="timeline-item" data-status={assignment.status}>
          <!-- Timeline Dot -->
          <div class={`timeline-dot ${assignment.status}`}></div>

          <!-- Assignment Card -->
          <div class={`assignment-card ${assignment.status}`} data-status={assignment.status}>
            <div class="card-header">
              <div class="card-title-section">
                <h3 class="assignment-title">{assignment.title}</h3>
                <p class="assignment-course">{assignment.course}</p>
              </div>
              <div class={`status-badge ${assignment.status}`}></div>
            </div>

            <div class="card-content">
              <div class="due-date-section">
                <span class="due-label">Due</span>
                <span class="due-date">{formatDate(assignment.dueDate)}</span>
                <span class="due-time">{assignment.dueTime}</span>
              </div>

              {assignment.progress > 0 && (
                <div class="progress-indicator">
                  <div class="progress-circle" style={`background: conic-gradient(from 0deg,
                    ${assignment.status === 'overdue' ? '#ef4444' : '#f59e0b'} ${assignment.progress * 3.6}deg,
                    rgba(255,255,255,0.3) ${assignment.progress * 3.6}deg)`}>
                    <span class="progress-text">{assignment.progress}%</span>
                  </div>
                </div>
              )}

              <button class="submit-btn">Submit Work</button>
            </div>
          </div>
        </div>
      ))}
    </div>
  </section>

  <!-- Submission Portal Section -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Submit Assignment</h2>
    </div>

    <div class="submission-portal">
      <div class="upload-area">
        <div class="upload-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
        </div>
        <h3 class="upload-title">Drop files here</h3>
        <p class="upload-subtitle">PDF, DOC, DOCX, MP4, MP3 (Max 50MB)</p>
        <button class="browse-btn">Browse Files</button>
      </div>

      <div class="submission-form">
        <div class="form-group">
          <label for="assignment-select">Assignment</label>
          <select id="assignment-select" class="form-control">
            <option value="">Choose assignment...</option>
            {activeAssignments.map((assignment) => (
              <option value={assignment.id}>
                {assignment.title}
              </option>
            ))}
          </select>
        </div>

        <div class="form-actions">
          <button class="btn-submit">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            Submit
          </button>
          <button class="btn-cancel">Cancel</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Past Assignments Section -->
  <section class="section" id="completed-section">
    <div class="section-header">
      <h2 class="section-title">Past Assignments</h2>
    </div>

    <div class="completed-grid">
      {pastAssignments.map((assignment) => (
        <div class="completed-card" data-status="completed">
          <div class={`grade-badge ${assignment.grade / assignment.maxGrade >= 0.9 ? 'excellent' : assignment.grade / assignment.maxGrade >= 0.7 ? 'good' : 'average'}`}>
            {assignment.grade}/{assignment.maxGrade}
          </div>

          <h3 class="completed-title">{assignment.title}</h3>
          <p class="completed-course">{assignment.course}</p>

          <div class="completed-date">
            {formatDate(assignment.submittedDate)}
          </div>

          <button class="view-btn">View Details</button>
        </div>
      ))}
    </div>
  </section>
</DashboardLayout>

<style>
  /* Header Styles */
  .header-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--bc-primary-blue);
    margin-bottom: 0.25rem;
  }

  .header-subtitle {
    font-size: 1rem;
    color: var(--bc-dark-gray);
  }

  .header-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .notification-btn {
    position: relative;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    border: none;
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: var(--bc-primary-blue);
  }

  .notification-btn:hover {
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.35);
    box-shadow: 0 8px 16px rgba(35, 7, 90, 0.1);
  }

  .notification-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    width: 20px;
    height: 20px;
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: white;
    border-radius: 50%;
    font-size: 0.75rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
  }

  /* Statistics Grid */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2.5rem;
  }

  .stat-card {
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 24px;
    padding: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 8px 32px rgba(35, 7, 90, 0.08);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .stat-card:hover {
    transform: translateY(-8px);
    background: rgba(255, 255, 255, 0.35);
    box-shadow: 0 16px 48px rgba(35, 7, 90, 0.12);
  }

  .stat-value {
    font-size: 2.5rem;
    font-weight: 700;
    background: linear-gradient(135deg, var(--bc-primary-blue), var(--bc-light-blue));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1;
    margin-bottom: 0.5rem;
  }

  .stat-label {
    font-size: 0.875rem;
    color: var(--bc-dark-gray);
    font-weight: 500;
  }

  /* Filter Section */
  .filter-section {
    display: flex;
    gap: 1rem;
    margin-bottom: 2.5rem;
    flex-wrap: wrap;
  }

  .filter-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: 20px;
    border: none;
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    color: var(--bc-dark-gray);
    font-size: 0.9375rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .filter-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(35, 7, 90, 0.1);
  }

  .filter-btn.active {
    background: linear-gradient(135deg, var(--bc-primary-blue), var(--bc-light-blue));
    color: white;
    box-shadow: 0 4px 16px rgba(35, 7, 90, 0.2);
  }

  .filter-count {
    background: rgba(255, 255, 255, 0.25);
    padding: 0.125rem 0.5rem;
    border-radius: 12px;
    font-size: 0.8125rem;
    font-weight: 600;
  }

  .filter-btn.active .filter-count {
    background: rgba(255, 255, 255, 0.3);
  }

  /* Section Styles */
  .section {
    margin-bottom: 3.5rem;
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }

  .section-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--bc-primary-blue);
  }

  .section-subtitle {
    font-size: 0.9375rem;
    color: var(--bc-dark-gray);
    margin-top: 0.25rem;
  }

  /* Timeline Container */
  .timeline-container {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .timeline-item {
    position: relative;
    display: flex;
    gap: 2rem;
    align-items: flex-start;
  }

  /* Timeline Dot */
  .timeline-dot {
    position: relative;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    flex-shrink: 0;
    margin-top: 1.5rem;
    z-index: 1;
    box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.3);
  }

  .timeline-dot::before {
    content: '';
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 2px;
    height: calc(100% + 2rem);
    background: rgba(255, 255, 255, 0.2);
  }

  .timeline-item:last-child .timeline-dot::before {
    display: none;
  }

  .timeline-dot.pending {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.2), 0 0 16px rgba(245, 158, 11, 0.4);
  }

  .timeline-dot.overdue {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2), 0 0 16px rgba(239, 68, 68, 0.4);
  }

  /* Assignment Card */
  .assignment-card {
    flex: 1;
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 28px;
    padding: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 8px 32px rgba(35, 7, 90, 0.08);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .assignment-card:hover {
    transform: translateX(8px) translateY(-4px);
    background: rgba(255, 255, 255, 0.35);
    box-shadow: 0 16px 48px rgba(35, 7, 90, 0.12);
    border-color: rgba(255, 255, 255, 0.5);
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .card-title-section {
    flex: 1;
  }

  .assignment-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--bc-primary-blue);
    margin-bottom: 0.5rem;
  }

  .assignment-course {
    font-size: 0.875rem;
    color: var(--bc-dark-gray);
    opacity: 0.8;
  }

  /* Floating Status Badge */
  .status-badge {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    flex-shrink: 0;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
  }

  .status-badge.pending {
    background: linear-gradient(135deg, #f59e0b, #d97706);
  }

  .status-badge.overdue {
    background: linear-gradient(135deg, #ef4444, #dc2626);
  }

  .status-badge.completed {
    background: linear-gradient(135deg, #22c55e, #16a34a);
  }

  /* Card Content */
  .card-content {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
  }

  .due-date-section {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.5rem;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 20px;
    backdrop-filter: blur(5px);
  }

  .due-label {
    font-size: 0.875rem;
    color: var(--bc-dark-gray);
    opacity: 0.7;
  }

  .due-date {
    font-size: 1rem;
    font-weight: 600;
    color: var(--bc-primary-blue);
  }

  .due-time {
    font-size: 0.875rem;
    color: var(--bc-dark-gray);
    opacity: 0.7;
  }

  /* Progress Circle */
  .progress-indicator {
    display: flex;
    justify-content: center;
  }

  .progress-circle {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    box-shadow: 0 4px 16px rgba(35, 7, 90, 0.1);
  }

  .progress-circle::before {
    content: '';
    position: absolute;
    inset: 6px;
    background: white;
    border-radius: 50%;
    z-index: 0;
  }

  .progress-text {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--bc-primary-blue);
    z-index: 1;
    position: relative;
  }

  /* Submit Button */
  .submit-btn {
    padding: 0.875rem 1.5rem;
    background: linear-gradient(135deg, var(--bc-primary-blue), var(--bc-light-blue));
    color: white;
    border: none;
    border-radius: 20px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 16px rgba(35, 7, 90, 0.2);
  }

  .submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(35, 7, 90, 0.3);
  }

  /* Submission Portal */
  .submission-portal {
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 28px;
    padding: 2.5rem;
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 8px 32px rgba(35, 7, 90, 0.08);
  }

  .upload-area {
    border: 2px dashed rgba(255, 255, 255, 0.5);
    border-radius: 20px;
    padding: 3rem 2rem;
    text-align: center;
    margin-bottom: 2rem;
    transition: all 0.3s ease;
    cursor: pointer;
    background: rgba(255, 255, 255, 0.2);
  }

  .upload-area:hover {
    border-color: var(--bc-light-blue);
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(35, 7, 90, 0.1);
  }

  .upload-icon {
    color: var(--bc-light-blue);
    margin-bottom: 1rem;
  }

  .upload-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--bc-primary-blue);
    margin-bottom: 0.5rem;
  }

  .upload-subtitle {
    font-size: 0.875rem;
    color: var(--bc-dark-gray);
    margin-bottom: 1.5rem;
  }

  .browse-btn {
    padding: 0.875rem 1.75rem;
    background: linear-gradient(135deg, var(--bc-primary-blue), var(--bc-light-blue));
    color: white;
    border: none;
    border-radius: 20px;
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 16px rgba(35, 7, 90, 0.2);
  }

  .browse-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(35, 7, 90, 0.3);
  }

  /* Form Styles */
  .submission-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .form-group label {
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--bc-primary-blue);
  }

  .form-control {
    padding: 0.875rem 1.25rem;
    border: 1px solid rgba(255, 255, 255, 0.4);
    border-radius: 16px;
    font-size: 0.9375rem;
    color: var(--bc-primary-blue);
    background: rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(5px);
    transition: all 0.3s ease;
    font-family: inherit;
  }

  .form-control:focus {
    outline: none;
    border-color: var(--bc-light-blue);
    background: rgba(255, 255, 255, 0.4);
    box-shadow: 0 0 0 3px rgba(35, 7, 90, 0.05);
  }

  textarea.form-control {
    resize: vertical;
    min-height: 100px;
  }

  .form-actions {
    display: flex;
    gap: 1rem;
    margin-top: 0.5rem;
  }

  .btn-submit,
  .btn-cancel {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.875rem 1.5rem;
    border-radius: 20px;
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    border: none;
  }

  .btn-submit {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    color: white;
    flex: 1;
    box-shadow: 0 4px 16px rgba(34, 197, 94, 0.2);
  }

  .btn-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(34, 197, 94, 0.3);
  }

  .btn-cancel {
    background: rgba(255, 255, 255, 0.25);
    color: var(--bc-dark-gray);
    border: 1px solid rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(10px);
  }

  .btn-cancel:hover {
    background: rgba(255, 255, 255, 0.35);
    transform: translateY(-2px);
  }

  /* Completed Assignments Grid */
  .completed-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .completed-card {
    position: relative;
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 24px;
    padding: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 8px 32px rgba(35, 7, 90, 0.08);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .completed-card:hover {
    transform: translateY(-8px);
    background: rgba(255, 255, 255, 0.35);
    box-shadow: 0 16px 48px rgba(35, 7, 90, 0.12);
  }

  /* Floating Grade Badge */
  .grade-badge {
    position: absolute;
    top: -12px;
    right: 1.5rem;
    padding: 0.5rem 1rem;
    border-radius: 16px;
    font-size: 0.875rem;
    font-weight: 700;
    color: white;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }

  .grade-badge.excellent {
    background: linear-gradient(135deg, #22c55e, #16a34a);
  }

  .grade-badge.good {
    background: linear-gradient(135deg, #3b82f6, #2563eb);
  }

  .grade-badge.average {
    background: linear-gradient(135deg, #f59e0b, #d97706);
  }

  .completed-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--bc-primary-blue);
    margin-top: 1rem;
  }

  .completed-course {
    font-size: 0.875rem;
    color: var(--bc-dark-gray);
    opacity: 0.8;
  }

  .completed-date {
    font-size: 0.875rem;
    color: var(--bc-dark-gray);
    padding: 0.75rem 1rem;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 16px;
    text-align: center;
    margin-top: auto;
  }

  .view-btn {
    padding: 0.75rem 1.5rem;
    background: rgba(255, 255, 255, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(5px);
    color: var(--bc-primary-blue);
    border-radius: 16px;
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .view-btn:hover {
    background: linear-gradient(135deg, var(--bc-primary-blue), var(--bc-light-blue));
    color: white;
    border-color: transparent;
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(35, 7, 90, 0.2);
  }

  /* Responsive Design */
  @media (max-width: 1024px) {
    .timeline-item {
      gap: 1.5rem;
    }

    .completed-grid {
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    }
  }

  @media (max-width: 768px) {
    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .filter-section {
      overflow-x: auto;
      flex-wrap: nowrap;
      padding-bottom: 0.5rem;
    }

    .timeline-item {
      gap: 1rem;
    }

    .timeline-dot {
      width: 16px;
      height: 16px;
      margin-top: 1rem;
    }

    .assignment-card {
      padding: 1.5rem;
    }

    .card-content {
      gap: 1rem;
    }

    .form-actions {
      flex-direction: column;
    }

    .btn-submit {
      flex: none;
    }

    .completed-grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 480px) {
    .stats-grid {
      grid-template-columns: 1fr;
    }

    .stat-card {
      padding: 1.5rem;
    }

    .timeline-item {
      flex-direction: column;
      gap: 1rem;
    }

    .timeline-dot {
      margin-top: 0;
    }

    .timeline-dot::before {
      display: none;
    }

    .assignment-card {
      padding: 1.25rem;
    }

    .assignment-title {
      font-size: 1.125rem;
    }

    .submission-portal {
      padding: 1.5rem;
    }
  }
</style>

<script>
  // Filter functionality
  const filterButtons = document.querySelectorAll('.filter-btn');
  const timelineItems = document.querySelectorAll('.timeline-item');
  const activeSection = document.getElementById('active-section');
  const completedSection = document.getElementById('completed-section');

  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      // Remove active class from all buttons
      filterButtons.forEach(btn => btn.classList.remove('active'));
      // Add active class to clicked button
      button.classList.add('active');

      const filter = button.getAttribute('data-filter');

      // Show/hide sections and cards based on filter
      if (filter === 'all') {
        if (activeSection) activeSection.style.display = 'block';
        if (completedSection) completedSection.style.display = 'block';
        timelineItems.forEach(item => item.style.display = 'flex');
      } else if (filter === 'active') {
        if (activeSection) activeSection.style.display = 'block';
        if (completedSection) completedSection.style.display = 'none';
        timelineItems.forEach(item => item.style.display = 'flex');
      } else if (filter === 'completed') {
        if (activeSection) activeSection.style.display = 'none';
        if (completedSection) completedSection.style.display = 'block';
      } else if (filter === 'overdue') {
        if (activeSection) activeSection.style.display = 'block';
        if (completedSection) completedSection.style.display = 'none';
        timelineItems.forEach(item => {
          const status = item.getAttribute('data-status');
          item.style.display = status === 'overdue' ? 'flex' : 'none';
        });
      }
    });
  });

  // Upload area click handler
  const uploadArea = document.querySelector('.upload-area');
  const browseBtn = document.querySelector('.browse-btn');

  if (uploadArea && browseBtn) {
    uploadArea.addEventListener('click', () => {
      // Simulate file picker
      console.log('File picker would open here');
    });
  }

  // Add smooth scroll behavior to timeline
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    },
    { threshold: 0.1 }
  );

  timelineItems.forEach((item) => {
    item.style.opacity = '0';
    item.style.transform = 'translateY(20px)';
    item.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
    observer.observe(item);
  });
</script>

---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';

const tools = [
  { id: 'grammar-checker', name: 'Grammar Checker', category: 'Writing', description: 'Check grammar with instant explanations and suggested rewrites tailored to learner profiles.', level: 'All levels', time: '5-10 min', badge: 'AI assisted' },
  { id: 'vocabulary-builder', name: 'Vocabulary Builder', category: 'Vocabulary', description: 'Personalised word banks, spaced repetition decks and printable flashcards.', level: 'B1-C2', time: '15 min', badge: 'Trending' },
  { id: 'pronunciation-practice', name: 'Pronunciation Practice', category: 'Speaking', description: 'Record, compare and receive phoneme-level feedback with pacing drills.', level: 'A2-C1', time: '10-15 min', badge: 'Audio lab' },
  { id: 'writing-assistant', name: 'Writing Assistant', category: 'Writing', description: 'AI-powered suggestions for structure, clarity and cohesive academic writing.', level: 'B2-C2', time: '10-20 min', badge: null },
  { id: 'quiz-maker', name: 'Quiz Maker', category: 'Testing', description: 'Generate adaptive quizzes with auto-marking and shareable results.', level: 'All levels', time: '5-15 min', badge: 'Popular' },
  { id: 'reading-comprehension', name: 'Reading Comprehension', category: 'Reading', description: 'Interactive articles with adjustable difficulty and comprehension analytics.', level: 'A2-C1', time: '15-25 min', badge: null },
  { id: 'listening-trainer', name: 'Listening Trainer', category: 'Listening', description: 'Dictation, accent recognition and timed comprehension sprints.', level: 'B1-C2', time: '10-20 min', badge: 'New' },
  { id: 'idiom-explorer', name: 'Idiom Explorer', category: 'Vocabulary', description: 'Deep dive into idioms with context, quizzes and usage trackers.', level: 'B2-C2', time: '10 min', badge: null },
  { id: 'conversation-practice', name: 'Conversation Practice', category: 'Speaking', description: 'Scenario-based chat with auto feedback and downloadable transcripts.', level: 'B1-C1', time: '15-30 min', badge: 'Live beta' },
  { id: 'word-of-day', name: 'Word of the Day', category: 'Vocabulary', description: 'Micro-learning nudges with usage examples and quick quizzes.', level: 'All levels', time: '5 min', badge: null },
  { id: 'essay-helper', name: 'Essay Helper', category: 'Writing', description: 'Structure essays with templates, outlines and academic referencing tips.', level: 'B2-C2', time: '20-30 min', badge: null },
  { id: 'phrasal-verbs', name: 'Phrasal Verbs Master', category: 'Vocabulary', description: 'Master phrasal verbs through stories, quizzes and spaced review.', level: 'B1-C1', time: '15 min', badge: null }
];

const heroTools = tools.slice(0, 3);
const grouped = tools.reduce((acc, tool) => {
  acc[tool.category] = acc[tool.category] || [];
  acc[tool.category].push(tool);
  return acc;
}, {});
const categories = Object.entries(grouped).map(([name, list]) => ({
  name,
  summary: list[0].description,
  count: list.length
}));
const quickActions = tools.filter((tool) => tool.time.includes('5')).slice(0, 4);
---

<Layout title="Learning Tools" description="Explore British Council Spain&apos;s digital learning tools for every English skill.">
  <Header />

  <main class="tools-hub">
    <section class="hero">
      <div class="bc-container hero__inner">
        <div class="hero__content">
          <span class="hero__badge">Digital studio</span>
          <h1>Tools that make English progress feel effortless</h1>
          <p>Mix and match AI-assisted feedback, interactive drills and printable planners. Each tool is curated by our experts and ready for classrooms, self-study or tutoring.</p>
          <div class="hero__cta">
            <a class="hero__primary" href="#featured">Explore featured tools</a>
            <a class="hero__secondary" href="#catalogue">Browse full catalogue</a>
          </div>
          <dl class="hero__stats">
            <div>
              <dt>Tools live today</dt>
              <dd>28</dd>
            </div>
            <div>
              <dt>Usage this month</dt>
              <dd>67K</dd>
            </div>
            <div>
              <dt>Average setup</dt>
              <dd>3 min</dd>
            </div>
          </dl>
        </div>
        <div class="hero__panel">
          {heroTools.map((tool) => (
            <article class="panel__card">
              {tool.badge && <span class="panel__badge">{tool.badge}</span>}
              <h2>{tool.name}</h2>
              <p>{tool.description}</p>
              <div class="panel__meta">
                <span>{tool.level}</span>
                <span>{tool.time}</span>
              </div>
              <a href="#catalogue" class="panel__cta">Launch tool</a>
            </article>
          ))}
        </div>
      </div>
    </section>

    <section id="featured" class="featured">
      <div class="bc-container">
        <div class="section-heading">
          <div>
            <h2>Featured toolkits</h2>
            <p>High-impact tools bundled with classroom guides, printable worksheets and analytics.</p>
          </div>
          <button type="button" class="ghost-link">Request onboarding</button>
        </div>
        <div class="featured__grid">
          {heroTools.map((tool) => (
            <article class="tool" >
              {tool.badge && <span class="tool__badge">{tool.badge}</span>}
              <h3>{tool.name}</h3>
              <p>{tool.description}</p>
              <div class="tool__meta">
                <span>{tool.level}</span>
                <span>{tool.time}</span>
              </div>
              <a href="#catalogue" class="tool__cta">Try it now</a>
            </article>
          ))}
        </div>
      </div>
    </section>

    <section id="catalogue" class="catalogue">
      <div class="bc-container">
        <div class="section-heading">
          <div>
            <h2>Browse by focus</h2>
            <p>Select the skill you want to upgrade. Each category contains ready-to-launch experiences.</p>
          </div>
          <a class="ghost-link" href="/resources/downloads">Download printable companions</a>
        </div>
        <div class="catalogue__grid">
          {categories.map((category) => (
            <article class="category">
              <header>
                <span class="category__title">{category.name}</span>
                <p>{category.summary}</p>
              </header>
              <p class="category__count">{category.count} tools</p>
              <button type="button">View tools</button>
            </article>
          ))}
        </div>
      </div>
    </section>

    <section class="library">
      <div class="bc-container">
        <div class="section-heading">
          <div>
            <h2>Quick actions</h2>
            <p>Fast tools when you only have a few minutes for feedback, diagnostics or motivation boosts.</p>
          </div>
          <button type="button" class="ghost-link">Sync with my portal</button>
        </div>
        <div class="library__grid">
          {quickActions.map((tool) => (
            <article class="action">
              <h3>{tool.name}</h3>
              <p>{tool.description}</p>
              <div class="action__meta">
                <span>{tool.time}</span>
                <span>{tool.level}</span>
              </div>
              <a href="#catalogue" class="action__cta">Launch</a>
            </article>
          ))}
        </div>
      </div>
    </section>

    <section class="cta">
      <div class="bc-container cta__inner">
        <div>
          <h2>Need a tailored toolkit?</h2>
          <p>Tell us your learners&apos; profile and we&apos;ll assemble a set of digital tools with guides, benchmarks and reporting templates.</p>
        </div>
        <form class="cta__form" novalidate>
          <label for="tools-email" class="sr-only">Email</label>
          <input id="tools-email" type="email" placeholder="you@school.edu" autocomplete="email" />
          <button type="button">Request toolkit</button>
        </form>
      </div>
    </section>
  </main>
</Layout>

<style>
  :root { color-scheme: light; }

  .tools-hub {
    display: flex;
    flex-direction: column;
    gap: 5rem;
    padding-bottom: 6rem;
  }

  .hero {
    position: relative;
    padding: 9rem 0 6rem;
    background: radial-gradient(circle at 0% 0%, rgba(124, 77, 255, 0.16), transparent 70%),
      linear-gradient(120deg, rgba(17, 6, 50, 0.95), rgba(35, 7, 90, 0.82));
    color: white;
    overflow: hidden;
  }

  .hero::before,
  .hero::after {
    content: '';
    position: absolute;
    width: 520px;
    height: 520px;
    border-radius: 50%;
    opacity: 0.4;
    pointer-events: none;
    mix-blend-mode: screen;
    z-index: 0;
  }

  .hero::before {
    top: -210px;
    right: -160px;
    background: radial-gradient(circle, rgba(255, 94, 168, 0.4), transparent 70%);
  }

  .hero::after {
    bottom: -200px;
    left: -160px;
    background: radial-gradient(circle, rgba(47, 214, 200, 0.32), transparent 70%);
  }

  .hero__inner {
    position: relative;
    display: grid;
    gap: 4rem;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    align-items: stretch;
    z-index: 1;
  }

  .hero__content {
    display: grid;
    gap: 1.6rem;
  }

  .hero__badge {
    display: inline-flex;
    align-items: center;
    padding: 0.55rem 1.3rem;
    border-radius: 999px;
    font-size: 0.82rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    background: rgba(255, 255, 255, 0.16);
    border: 1px solid rgba(255, 255, 255, 0.22);
    backdrop-filter: blur(10px);
  }

  .hero__content h1 {
    font-size: clamp(2.6rem, 5vw, 3.8rem);
    line-height: 1.05;
    color: white;
    text-wrap: balance;
  }

  .hero__content p {
    max-width: 34rem;
    color: rgba(255, 255, 255, 0.78);
    font-size: 1.05rem;
  }

  .hero__cta {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .hero__primary,
  .hero__secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.9rem 1.9rem;
    border-radius: 999px;
    font-weight: 600;
    font-size: 0.95rem;
    transition: transform 0.4s ease;
  }

  .hero__primary {
    color: #10043b;
    background: linear-gradient(135deg, #ffb7f2, #7c4dff);
    box-shadow: 0 18px 35px rgba(124, 77, 255, 0.34);
  }

  .hero__secondary {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .hero__primary:hover,
  .hero__secondary:hover {
    transform: translateY(-3px);
  }

  .hero__stats {
    display: grid;
    gap: 1.4rem;
    grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
    margin-top: 2.4rem;
  }

  .hero__stats div {
    background: rgba(255, 255, 255, 0.12);
    border-radius: 1.4rem;
    padding: 1.4rem 1.6rem;
    border: 1px solid rgba(255, 255, 255, 0.18);
    backdrop-filter: blur(16px);
  }

  .hero__stats dt {
    font-size: 0.82rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: rgba(255, 255, 255, 0.65);
  }

  .hero__stats dd {
    margin-top: 0.35rem;
    font-size: 1.9rem;
    font-weight: 700;
    color: white;
  }

  .hero__panel {
    display: grid;
    gap: 1.4rem;
  }

  .panel__card {
    border-radius: 2.2rem;
    padding: 2.2rem;
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.18);
    backdrop-filter: blur(18px);
    color: rgba(255, 255, 255, 0.85);
    box-shadow: 0 22px 45px rgba(35, 7, 90, 0.24);
    display: grid;
    gap: 1.1rem;
  }

  .panel__badge {
    display: inline-flex;
    align-items: center;
    padding: 0.35rem 0.9rem;
    border-radius: 999px;
    font-size: 0.78rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    background: rgba(0, 0, 0, 0.3);
  }

  .panel__card h2 {
    font-size: 1.4rem;
    color: white;
  }

  .panel__card p {
    color: rgba(255, 255, 255, 0.75);
  }

  .panel__meta {
    display: flex;
    gap: 1.2rem;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.7);
  }

  .panel__cta {
    justify-self: flex-start;
    border-radius: 999px;
    padding: 0.8rem 1.8rem;
    background: linear-gradient(135deg, #54b5ff, #7c4dff);
    color: white;
    font-weight: 600;
  }

  .section-heading {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
    margin-bottom: 2.8rem;
  }

  .section-heading h2 {
    font-size: clamp(2rem, 4vw, 2.8rem);
  }

  .section-heading p {
    color: var(--muted);
    max-width: 32rem;
  }

  .ghost-link {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-weight: 600;
    color: var(--bc-primary-blue);
    border-bottom: 1px solid rgba(35, 7, 90, 0.2);
    padding-bottom: 0.25rem;
  }

  .featured__grid {
    display: grid;
    gap: 2rem;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .tool {
    border-radius: 2.2rem;
    padding: 2.4rem;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(240, 238, 255, 0.92));
    border: 1px solid rgba(17, 6, 50, 0.08);
    box-shadow: 0 22px 45px rgba(35, 7, 90, 0.12);
    display: grid;
    gap: 1.1rem;
  }

  .tool__badge {
    display: inline-flex;
    align-items: center;
    padding: 0.35rem 0.9rem;
    border-radius: 999px;
    font-size: 0.78rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    background: rgba(17, 6, 50, 0.08);
  }

  .tool h3 {
    font-size: 1.4rem;
    color: var(--bc-primary-blue);
  }

  .tool p {
    color: var(--muted);
  }

  .tool__meta {
    display: flex;
    gap: 1.2rem;
    font-size: 0.85rem;
    color: var(--muted);
  }

  .tool__cta {
    justify-self: flex-start;
    border-radius: 999px;
    padding: 0.8rem 1.8rem;
    background: linear-gradient(135deg, #23075a, #7c4dff);
    color: white;
    font-weight: 600;
  }

  .catalogue__grid {
    display: grid;
    gap: 2rem;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  }

  .category {
    border-radius: 2.2rem;
    padding: 2.2rem;
    background: rgba(255, 255, 255, 0.94);
    border: 1px solid rgba(17, 6, 50, 0.08);
    box-shadow: 0 20px 40px rgba(35, 7, 90, 0.1);
    display: grid;
    gap: 1.2rem;
  }

  .category header {
    display: grid;
    gap: 0.8rem;
  }

  .category__title {
    display: inline-flex;
    align-items: center;
    padding: 0.35rem 0.9rem;
    border-radius: 999px;
    font-weight: 600;
    background: rgba(17, 6, 50, 0.08);
  }

  .category header p {
    color: var(--muted);
  }

  .category__count {
    font-size: 0.85rem;
    color: var(--muted);
  }

  .category button {
    justify-self: flex-start;
    border-radius: 999px;
    padding: 0.8rem 1.8rem;
    border: none;
    font-weight: 600;
    background: rgba(17, 6, 50, 0.85);
    color: white;
  }

  .library__grid {
    display: grid;
    gap: 1.8rem;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }

  .action {
    border-radius: 1.8rem;
    padding: 1.8rem;
    background: rgba(255, 255, 255, 0.94);
    border: 1px solid rgba(17, 6, 50, 0.08);
    box-shadow: 0 18px 35px rgba(35, 7, 90, 0.12);
    display: grid;
    gap: 0.9rem;
  }

  .action h3 {
    font-size: 1.2rem;
    color: var(--bc-primary-blue);
  }

  .action p {
    color: var(--muted);
  }

  .action__meta {
    display: flex;
    gap: 1rem;
    font-size: 0.85rem;
    color: var(--muted);
  }

  .action__cta {
    justify-self: flex-start;
    font-weight: 600;
    color: var(--bc-primary-blue);
  }

  .cta {
    padding: 5rem 0;
  }

  .cta__inner {
    display: grid;
    gap: 2rem;
    align-items: center;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.96), rgba(235, 234, 255, 0.98));
    padding: 3rem;
    border-radius: 2.6rem;
    border: 1px solid rgba(17, 6, 50, 0.08);
    box-shadow: 0 26px 45px rgba(35, 7, 90, 0.12);
  }

  .cta__inner h2 {
    font-size: clamp(2rem, 4vw, 2.6rem);
    margin-bottom: 0.8rem;
  }

  .cta__inner p {
    color: var(--muted);
    max-width: 30rem;
  }

  .cta__form {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 1rem;
    background: white;
    padding: 0.6rem;
    border-radius: 999px;
    border: 1px solid rgba(35, 7, 90, 0.15);
    box-shadow: inset 0 0 0 1px rgba(124, 77, 255, 0.08);
  }

  .cta__form input {
    border: none;
    padding: 0 1.5rem;
    font-size: 1rem;
    border-radius: 999px;
    background: transparent;
    color: var(--ink);
  }

  .cta__form input:focus {
    outline: none;
  }

  .cta__form button {
    border: none;
    border-radius: 999px;
    padding: 0.85rem 1.8rem;
    font-weight: 600;
    background: linear-gradient(135deg, #ffb7f2, #7c4dff);
    color: #10043b;
    cursor: pointer;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  @media (max-width: 1023px) {
    .hero__inner {
      grid-template-columns: 1fr;
    }

    .hero__panel {
      order: -1;
    }
  }

  @media (max-width: 639px) {
    .hero {
      padding: 7.5rem 0 4.5rem;
    }

    .cta__form {
      grid-template-columns: 1fr;
      padding: 1rem;
    }

    .cta__form button {
      width: 100%;
    }
  }
</style>
